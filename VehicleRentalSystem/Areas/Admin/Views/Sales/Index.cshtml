@using ChartJSCore.Models;
@using VehicleRentalSystem.Presentation.Areas.Admin.ViewModels;
@model SalesViewModel
@{
    ViewData["Title"] = "Sales & Stats";
    Chart verticalBarChart = (Chart)ViewData["VerticalBarChart"];
    Chart horizontalBarChart = (Chart)ViewData["HorizontalBarChart"];
    Chart lineChart = (Chart)ViewData["LineChart"];
}

<div class="container" style="margin-top:9vh; height:88vh; overflow-y:auto">
    <h3>Sales & Stats</h3>

    <div class="d-flex w-full gap-5">
        <div class="w-75 d-flex flex-column gap-3" style="height:75vh">
            <div class="h-50 w-full bg-white" style="border-radius:10px !important">
                <div class="p-3">
                    @*<h4>All Users Rents</h4>
                    @foreach (var item in Model.UserRentCount)
                    {
                        <p>@item.User: @item.Count </p>
                    }*@
                </div>
            </div>
            <div class="h-50 bg-white mt-1" style="border-radius:10px !important">
                <div class="p-3">
                    @*<h4>All Brands Vehicles</h4>
                    @foreach (var item in Model.BrandVehicleCount)
                    {
                        <p>@item.Brand: @item.Count </p>
                    }*@
                </div>
            </div>
        </div>
        <div class="w-25 d-flex flex-column gap-3">
            <div class="d-flex bg-white p-3" style="border-radius:10px !important">
                <div>
                    <h4>Customers</h4>
                    <p>Total Customers: @Model.CustomersCount</p>
                </div>
            </div>
            <div class="d-flex  bg-white p-3 rounded-4" style="border-radius:10px !important">
                <div>
                    <h4>Rents</h4>
                    <p>Total Rents: @Model.TotalRentalCounts</p>
                    <p>Pending Requests: @Model.PendingRequestsCount</p>
                    <p>Total Sales: Rs @Model.TotalSales</p>
                </div>
            </div>
            <div class="d-flex  bg-white p-3 rounded-4" style="border-radius:10px !important; height:120px !important; overflow-y:auto;">
                <div>
                    @*<h4>All Vehicle Rent Count</h4>
                    @foreach (var item in Model.VehicleRentCount)
                    {
                        <p>@item.Vehicle: @item.Count </p>
                    }*@
                    
                </div>
            </div>
            <div class="d-flex  bg-white p-3 rounded-4" style="border-radius:10px !important; height:120px !important; overflow-y:auto;">
                <div>
                    <h4>InActive Customers</h4>
                    @foreach (var item in Model.InactiveUserCount)
                    {
                        <p>@item.CustomerName's Last Rented Date @item.LastRentedDate</p>
                    }
                </div>
            </div>
        </div>
    </div>
</div>


<div class="card col-md-6">
    <div class="card-body">
        <h5 class="card-title">Vehicle Rents</h5>
        <canvas id="verticalBarChart"></canvas>
    </div>
</div>
<div class="card col-md-6">
        <div class="card-body">
            <h5 class="card-title">Total User Rents</h5>
            <canvas id="horizontalBarChart"></canvas>
        </div>
    </div>
    <div class="card col-md-6">
        <div class="card-body">
            <h5 class="card-title">Brand's Vehicle Count</h5>
            <canvas id="lineChart"></canvas>
        </div>
        <div>Use alt-click for drag-to-zoom</div>
    </div>

@section Scripts {
    <script type="text/javascript">
        @Html.Raw(verticalBarChart.CreateChartCode("verticalBarChart"));
    </script>
    <script type="text/javascript">
        @Html.Raw(horizontalBarChart.CreateChartCode("horizontalBarChart"));
    </script>
    <script type="text/javascript">
        @Html.Raw(lineChart.CreateChartCode("lineChart"));
    </script>
}

<style>
    body{
        margin-bottom:0px !important;
    }
    p{
        margin-bottom:5px !important;
    }

</style>
